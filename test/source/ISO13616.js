/* global source, describe, it, each, expect */

const ISO13616 = source('Entity/ISO13616');

describe('ISO 13616', () => {
	describe('validates', () => {
		each`
			input                                | valid
			-------------------------------------|-------
			BY 14 NBRB 3600 900000002Z00AB00     | no
			SV 62 CENR 00000000000000700024      | no
			IQ 98 NBIQ 851 123456789012          | no
			BY 13 NBRB 3600 900000002Z00AB00     | yes
			SV 62 CENR 00000000000000700025      | yes
			IQ 98 NBIQ 850 123456789012          | yes
			IQ 01 NBIQ 850 123456789012          | no
			AD 12 0001 2030 200359100100         | yes
			AE 07 033 1234567890123456           | yes
			AL 47 21211009 0000000235698741      | yes
			AO 44 123412341234123412341          | yes
			AT 61 19043 00234573201              | yes
			AX 21 123456 00000785                | yes
			AZ 21 NABZ 00000000137010001944      | yes
			BA 39 129 007 9401028494             | yes
			BE 68 539 0075470 34                 | yes
			BF 45 12341234123412341234123        | yes
			BG 80 BNBG 9661 1020345678           | yes
			BH 67 BMAG 00001299123456            | yes
			BI 33 123412341234                   | yes
			BJ 83 A 12312341234123412341234      | yes
			BL 68 20041 01005 0500013M026 06     | yes
			BR 97 00360305 00001 0009795493 P 1  | yes
			BR 00 00360305 00001 0009795493 P 1  | no
			CH 93 00762 011623852957             | yes
			CI 77 A 12312341234123412341234      | yes
			CM 15 12341234123412341234123        | yes
			CR 05 0 152 02001026284066           | yes
			CV 05 123412341234123412341          | yes
			CY 17 002 00128 0000001200527600     | yes
			CZ 65 0800 000019 2000145399         | yes
			DE 89 37040044 0532013000            | yes
			DK 50 0040 0440116243                | yes
			DO 28 BAGR 00000001212453611324      | yes
			DZ 35 12341234123412341234           | yes
			EE 38 22 00 221020145685             | yes
			ES 91 2100 0418 45 0200051332        | yes
			FI 21 123456 00000785                | yes
			FO 20 0040 0440116243                | yes
			FR 14 20041 01005 0500013M026 06     | yes
			GB 29 NWBK 601613 31926819           | yes
			GE 29 NB 0000000101904917            | yes
			GF 41 20041 01005 0500013M026 06     | yes
			GI 75 NWBK 000000007099453           | yes
			GL 20 0040 0440116243                | yes
			GP 11 20041 01005 0500013M026 06     | yes
			GR 16 011 0125 0000000012300695      | yes
			GT 82 TRAJ 01 02 0000001210029690    | yes
			HR 12 1001005 1863000160             | yes
			HU 42 117 73016 1111101800000000     | yes
			IE 29 AIBK 931152 12345678           | yes
			IL 62 010 800 0000099999999          | yes
			IR 08 1234123412341234123412         | yes
			IS 14 0159 26 007654 5510730339      | yes
			IT 60 X 05428 11101 000000123456     | yes
			JO 94 CBJO 0010 000000000131000302   | yes
			KW 81 CBKU 0000000000001234560101    | yes
			KZ 86 125 KZT5004100100              | yes
			LB 62 0999 00000001001901229114      | yes
			LC 55 HEMM 000100010012001200023015  | yes
			LI 21 08810 0002324013AA             | yes
			LT 12 10000 11101001000              | yes
			LU 28 001 9400644750000              | yes
			LV 80 BANK 0000435195001             | yes
			MC 58 11222 00001 01234567890 30     | yes
			MD 24 AG 000225100013104168          | yes
			ME 25 505 000012345678951            | yes
			MF 84 20041 01005 0500013M026 06     | yes
			MG 40 12341234123412341234123        | yes
			MK 07 250 120000058984               | yes
			ML 75 A 12312341234123412341234      | yes
			MQ 51 20041 01005 0500013M026 06     | yes
			MR 13 00020 00101 00001234567 53     | yes
			MT 84 MALT 01100 0012345MTLCAST001S  | yes
			MU 17 BOMM 0101101030300200000MUR    | yes
			MZ 97 123412341234123412341          | yes
			MZ 00 123412341234123412341          | no
			NC 84 20041 01005 0500013M026 06     | yes
			NL 91 ABNA 0417164300                | yes
			NO 93 8601 1117947                   | yes
			PF 57 20041 01005 0500013M026 06     | yes
			PK 36 SCBL 0000001123456702          | yes
			PL 61 10901014 0000071219812874      | yes
			PM 36 20041 01005 0500013M026 06     | yes
			PS 92 PALS 000000000400123456702     | yes
			PT 50 0002 0123 12345678901 54       | yes
			QA 58 DOHB 00001234567890ABCDEFG     | yes
			RE 42 20041 01005 0500013M026 06     | yes
			RO 49 AAAA 1B31007593840000          | yes
			RS 35 260 005601001611379            | yes
			SA 03 80 000000608010167519          | yes
			SC 18 SSCB 1101 0000000000001497 USD | yes
			SE 45 500 00000058398257466          | yes
			SI 56 19 100 0000123438              | yes
			SK 31 1200 000019 8742637541         | yes
			SM 86 U 03225 09800 000000270100     | yes
			SN 15 A 12312341234123412341234      | yes
			ST 68 0001 0001 0051845310112        | yes
			TF 21 20041 01005 0500013M026 06     | yes
			TL 38 008 0012345678910157           | yes
			TN 59 10 006 035183598478831         | yes
			TR 33 00061 0 0519786457841326       | yes
			UA 21 399622 0000026007233566001     | yes
			VG 96 VPVG 0000012345678901          | yes
			WF 91 20041 01005 0500013M026 06     | yes
			XK 05 1212 012345678906              | yes
			YT 31 20041 01005 0500013M026 06     | yes
		`('validate $input: $valid', ({ input, valid }, next) => {
			expect(ISO13616.validate(input)).to.equal(valid === 'yes');

			next();
		});
	});

	describe('checksums', () => {
		each`
			country | account                        | checksum
			--------|--------------------------------|----------
			AL      | 879383139283385892133497       | 02
			DZ      | 64971811121137645114           | 03
			SA      | 80 000000608010167519          | 03
			AD      | 52766856549145881381           | 04
			AO      | 681239777672285531763          | 05
			CR      | 0 152 02001026284066           | 05
			CV      | 123412341234123412341          | 05
			XK      | 1212 012345678906              | 05
			AT      | 1400099382144583               | 06
			AZ      | IJCR97244619194815257411       | 07
			AE      | 033 1234567890123456           | 07
			MK      | 250 120000058984               | 07
			BH      | SNHJ84316918873374             | 08
			IR      | 1234123412341234123412         | 08
			BE      | 436133791957                   | 09
			BJ      | Y348815723151968114175         | 10
			BA      | 1026655675445411               | 11
			GP      | 20041 01005 0500013M026 06     | 11
			BR      | 82426619546493163265596Y7      | 12
			AD      | 0001 2030 200359100100         | 12
			HR      | 1001005 1863000160             | 12
			LT      | 10000 11101001000              | 12
			BG      | RZBB91559163653664             | 13
			BY      | NBRB 3600 900000002Z00AB00     | 13
			MR      | 00020 00101 00001234567 53     | 13
			BF      | 73592581732127964337231        | 14
			FR      | 20041 01005 0500013M026 06     | 14
			IS      | 0159 26 007654 5510730339      | 14
			BI      | 331169796171                   | 15
			CM      | 12341234123412341234123        | 15
			SN      | A 12312341234123412341234      | 15
			CM      | 41953753968167452483188        | 16
			GR      | 011 0125 0000000012300695      | 16
			CV      | 723597824491114146453          | 17
			CY      | 002 00128 0000001200527600     | 17
			MU      | BOMM 0101101030300200000MUR    | 17
			TD      | 19117164916125291316295        | 18
			SC      | SSCB 1101 0000000000001497 USD | 18
			KM      | 55573597659414815215217        | 19
			CG      | 89444277585525676393928        | 20
			FO      | 0040 0440116243                | 20
			GL      | 0040 0440116243                | 20
			CR      | 01988624777835119              | 21
			AX      | 123456 00000785                | 21
			AZ      | NABZ 00000000137010001944      | 21
			FI      | 123456 00000785                | 21
			LI      | 08810 0002324013AA             | 21
			TF      | 20041 01005 0500013M026 06     | 21
			UA      | 399622 0000026007233566001     | 21
			HR      | 25000098948163916              | 22
			CY      | 684446159942735945882419       | 23
			CZ      | 50518554871144896869           | 24
			MD      | AG 000225100013104168          | 24
			DK      | 50517549354428                 | 25
			ME      | 505 000012345678951            | 25
			DO      | AGVX14833837185485454282       | 26
			EG      | 62135598289522285918467        | 27
			EE      | 1269928223228274               | 28
			DO      | BAGR 00000001212453611324      | 28
			LU      | 001 9400644750000              | 28
			FO      | 88183928132461                 | 29
			GB      | NWBK 601613 31926819           | 29
			GE      | NB 0000000101904917            | 29
			IE      | AIBK 931152 12345678           | 29
			FI      | 16716252636726                 | 30
			FR      | 12739000309734959749Z21        | 31
			SK      | 1200 000019 8742637541         | 31
			YT      | 20041 01005 0500013M026 06     | 31
			GA      | 71973996412173845171651        | 32
			GE      | 467985258645485213             | 33
			BI      | 123412341234                   | 33
			TR      | 00061 0 0519786457841326       | 33
			DE      | 500105173183564997             | 34
			GI      | RRZZ215892531774912            | 35
			DZ      | 12341234123412341234           | 35
			RS      | 260 005601001611379            | 35
			GR      | 01754957256468874344851        | 36
			PK      | SCBL 0000001123456702          | 36
			PM      | 20041 01005 0500013M026 06     | 36
			GL      | 38893781766583                 | 37
			GT      | 343645699491641817443742       | 38
			EE      | 22 00 221020145685             | 38
			TL      | 008 0012345678910157           | 38
			HN      | ZJHM35686422186217913299       | 39
			BA      | 129 007 9401028494             | 39
			HU      | 131000072231413411937617       | 40
			MG      | 12341234123412341234123        | 40
			IS      | 3741191396426718776151         | 41
			GF      | 20041 01005 0500013M026 06     | 41
			IR      | 9264299524156287379654         | 42
			HU      | 117 73016 1111101800000000     | 42
			RE      | 20041 01005 0500013M026 06     | 42
			IE      | BOFI900017311491               | 43
			IL      | 1454383667833872578            | 44
			AO      | 123412341234123412341          | 44
			IT      | N0300203280831791415983        | 45
			BF      | 12341234123412341234123        | 45
			SE      | 500 00000058398257466          | 45
			CI      | F64644391232919173159287       | 46
			JO      | PDYZ3964412979253132528812     | 47
			AL      | 21211009 0000000235698741      | 47
			KZ      | 8937778258599574               | 48
			KW      | AVVI3818456374979534516965     | 49
			RO      | AAAA 1B31007593840000          | 49
			LB      | 358345571922694353436235       | 50
			DK      | 0040 0440116243                | 50
			PT      | 0002 0123 12345678901 54       | 50
			LI      | 08800243487669282              | 51
			MQ      | 20041 01005 0500013M026 06     | 51
			LT      | 1869822744229473               | 52
			LU      | 0109817869837317               | 53
			MK      | 223867762758864                | 54
			MG      | 66956289659924632792773        | 55
			LC      | HEMM 000100010012001200023015  | 55
			ML      | E59178246495178954177386       | 56
			SI      | 19 100 0000123438              | 56
			MT      | BDVP21727153731463486763793    | 57
			PF      | 20041 01005 0500013M026 06     | 57
			MR      | 45212139334161691715671        | 58
			MC      | 11222 00001 01234567890 30     | 58
			QA      | DOHB 00001234567890ABCDEFG     | 58
			MU      | VPRY6443498662466173331JJY     | 59
			TN      | 10 006 035183598478831         | 59
			MD      | 99187965235371929495           | 60
			IT      | X 05428 11101 000000123456     | 60
			MC      | 14508000706879959398X26        | 61
			AT      | 19043 00234573201              | 61
			PL      | 10901014 0000071219812874      | 61
			ME      | 633556244323376113             | 62
			IL      | 010 800 0000099999999          | 62
			LB      | 0999 00000001001901229114      | 62
			SV      | CENR 00000000000000700025      | 62
			MA      | 818541286421185989751158       | 63
			MZ      | 959223519311373616955          | 64
			NL      | RABO2605052419                 | 65
			CZ      | 0800 000019 2000145399         | 65
			NI      | KCEU717256698278816915756999   | 66
			NE      | 684768528829613835211625       | 67
			BH      | BMAG 00001299123456            | 67
			SK      | 99164696816289865679           | 68
			BE      | 539 0075470 34                 | 68
			BL      | 20041 01005 0500013M026 06     | 68
			ST      | 0001 0001 0051845310112        | 68
			PK      | XXPH9176327357176585           | 69
			PL      | 109024024775372861394669       | 70
			PS      | SQVT899328275485757945995      | 71
			PT      | 003506516952358494614          | 72
			QA      | BRCU743549832692682197333      | 73
			XK      | 1152436711149153               | 74
			RO      | PORL3385798112493476           | 75
			GI      | NWBK 000000007099453           | 75
			ML      | A 12312341234123412341234      | 75
			LC      | CJMV147818355477261427145487   | 76
			SM      | 03225098008621322211652        | 77
			CI      | A 12312341234123412341234      | 77
			ST      | 217561134955599268292          | 78
			SA      | 21725731717514947437           | 79
			SN      | G86448536411747366126977       | 80
			BG      | BNBG 9661 1020345678           | 80
			LV      | BANK 0000435195001             | 80
			SC      | 421734429462871437783986ASN    | 81
			KW      | CBKU 0000000000001234560101    | 81
			SK      | 99622312594968817536           | 82
			GT      | TRAJ 01 02 0000001210029690    | 82
			SI      | 484965273819968                | 83
			BJ      | A 12312341234123412341234      | 83
			ES      | 31907923586735946395           | 84
			MF      | 20041 01005 0500013M026 06     | 84
			MT      | MALT 01100 0012345MTLCAST001S  | 84
			NC      | 20041 01005 0500013M026 06     | 84
			SE      | 21317981132339684745           | 85
			CH      | 89144991761728569              | 86
			KZ      | 125 KZT5004100100              | 86
			SM      | U 03225 09800 000000270100     | 86
			TL      | 1213467442581465291            | 87
			TG      | 687233275551444283841817       | 88
			TN      | 52747478818323621785           | 89
			DE      | 37040044 0532013000            | 89
			TR      | 0006282261782682663695         | 90
			UA      | 4978358772228356856348146      | 91
			ES      | 2100 0418 45 0200051332        | 91
			NL      | ABNA 0417164300                | 91
			WF      | 20041 01005 0500013M026 06     | 91
			AE      | 0332442228769266342            | 92
			PS      | PALS 000000000400123456702     | 92
			GB      | BARC20032653393386             | 93
			CH      | 00762 011623852957             | 93
			NO      | 8601 1117947                   | 93
			VG      | QLPG6892725685463662           | 94
			JO      | CBJO 0010 000000000131000302   | 94
			AL      | 614566133566827938536565       | 95
			DZ      | 11749627459257136769           | 96
			VG      | VPVG 0000012345678901          | 96
			AD      | 82732793347266899771           | 97
			BR      | 00360305 00001 0009795493 P 1  | 97
			MZ      | 123412341234123412341          | 97
			AO      | 566885921246645844632          | 98
			IQ      | NBIQ 850 123456789012          | 98
		`(
			'country $country and account $account creates checksum $checksum',
			({ country, account, checksum }, next) => {
				expect(ISO13616.checksum(account, country)).to.equal(checksum);

				next();
			}
		);
	});

	describe('generates', () => {
		each`
			country | account                         | full                             | formatted
			--------|---------------------------------|----------------------------------|-----------
			BY      |  NBRB 3600 900000002Z00AB00     | BY13NBRB3600900000002Z00AB00     | BY13 NBRB 3600 9000 0000 2Z00 AB00
			SV      |  CENR 00000000000000700025      | SV62CENR00000000000000700025     | SV62 CENR 0000 0000 0000 0070 0025
			IQ      |  NBIQ 850 123456789012          | IQ98NBIQ850123456789012          | IQ98 NBIQ 8501 2345 6789 012
			BY      |  NBRB 3600 900000002Z00AB00     | BY13NBRB3600900000002Z00AB00     | BY13 NBRB 3600 9000 0000 2Z00 AB00
			SV      |  CENR 00000000000000700025      | SV62CENR00000000000000700025     | SV62 CENR 0000 0000 0000 0070 0025
			IQ      |  NBIQ 850 123456789012          | IQ98NBIQ850123456789012          | IQ98 NBIQ 8501 2345 6789 012
			AD      |  0001 2030 200359100100         | AD1200012030200359100100         | AD12 0001 2030 2003 5910 0100
			AE      |  033 1234567890123456           | AE070331234567890123456          | AE07 0331 2345 6789 0123 456
			AL      |  21211009 0000000235698741      | AL47212110090000000235698741     | AL47 2121 1009 0000 0002 3569 8741
			AO      |  123412341234123412341          | AO44123412341234123412341        | AO44 1234 1234 1234 1234 1234 1
			AT      |  19043 00234573201              | AT611904300234573201             | AT61 1904 3002 3457 3201
			AX      |  123456 00000785                | AX2112345600000785               | AX21 1234 5600 0007 85
			AZ      |  NABZ 00000000137010001944      | AZ21NABZ00000000137010001944     | AZ21 NABZ 0000 0000 1370 1000 1944
			BA      |  129 007 9401028494             | BA391290079401028494             | BA39 1290 0794 0102 8494
			BE      |  539 0075470 34                 | BE68539007547034                 | BE68 5390 0754 7034
			BF      |  12341234123412341234123        | BF4512341234123412341234123      | BF45 1234 1234 1234 1234 1234 123
			BG      |  BNBG 9661 1020345678           | BG80BNBG96611020345678           | BG80 BNBG 9661 1020 3456 78
			BH      |  BMAG 00001299123456            | BH67BMAG00001299123456           | BH67 BMAG 0000 1299 1234 56
			BI      |  123412341234                   | BI33123412341234                 | BI33 1234 1234 1234
			BJ      |  A 12312341234123412341234      | BJ83A12312341234123412341234     | BJ83 A123 1234 1234 1234 1234 1234
			BL      |  20041 01005 0500013M026 06     | BL6820041010050500013M02606      | BL68 2004 1010 0505 0001 3M02 606
			BR      |  00360305 00001 0009795493 P 1  | BR9700360305000010009795493P1    | BR97 0036 0305 0000 1000 9795 493P 1
			CH      |  00762 011623852957             | CH9300762011623852957            | CH93 0076 2011 6238 5295 7
			CI      |  A 12312341234123412341234      | CI77A12312341234123412341234     | CI77 A123 1234 1234 1234 1234 1234
			CM      |  12341234123412341234123        | CM1512341234123412341234123      | CM15 1234 1234 1234 1234 1234 123
			CR      |  0 152 02001026284066           | CR05015202001026284066           | CR05 0152 0200 1026 2840 66
			CV      |  123412341234123412341          | CV05123412341234123412341        | CV05 1234 1234 1234 1234 1234 1
			CY      |  002 00128 0000001200527600     | CY17002001280000001200527600     | CY17 0020 0128 0000 0012 0052 7600
			CZ      |  0800 000019 2000145399         | CZ6508000000192000145399         | CZ65 0800 0000 1920 0014 5399
			DE      |  37040044 0532013000            | DE89370400440532013000           | DE89 3704 0044 0532 0130 00
			DK      |  0040 0440116243                | DK5000400440116243               | DK50 0040 0440 1162 43
			DO      |  BAGR 00000001212453611324      | DO28BAGR00000001212453611324     | DO28 BAGR 0000 0001 2124 5361 1324
			DZ      |  12341234123412341234           | DZ3512341234123412341234         | DZ35 1234 1234 1234 1234 1234
			EE      |  22 00 221020145685             | EE382200221020145685             | EE38 2200 2210 2014 5685
			ES      |  2100 0418 45 0200051332        | ES9121000418450200051332         | ES91 2100 0418 4502 0005 1332
			FI      |  123456 00000785                | FI2112345600000785               | FI21 1234 5600 0007 85
			FO      |  0040 0440116243                | FO2000400440116243               | FO20 0040 0440 1162 43
			FR      |  20041 01005 0500013M026 06     | FR1420041010050500013M02606      | FR14 2004 1010 0505 0001 3M02 606
			GB      |  NWBK 601613 31926819           | GB29NWBK60161331926819           | GB29 NWBK 6016 1331 9268 19
			GE      |  NB 0000000101904917            | GE29NB0000000101904917           | GE29 NB00 0000 0101 9049 17
			GF      |  20041 01005 0500013M026 06     | GF4120041010050500013M02606      | GF41 2004 1010 0505 0001 3M02 606
			GI      |  NWBK 000000007099453           | GI75NWBK000000007099453          | GI75 NWBK 0000 0000 7099 453
			GL      |  0040 0440116243                | GL2000400440116243               | GL20 0040 0440 1162 43
			GP      |  20041 01005 0500013M026 06     | GP1120041010050500013M02606      | GP11 2004 1010 0505 0001 3M02 606
			GR      |  011 0125 0000000012300695      | GR1601101250000000012300695      | GR16 0110 1250 0000 0001 2300 695
			GT      |  TRAJ 01 02 0000001210029690    | GT82TRAJ01020000001210029690     | GT82 TRAJ 0102 0000 0012 1002 9690
			HR      |  1001005 1863000160             | HR1210010051863000160            | HR12 1001 0051 8630 0016 0
			HU      |  117 73016 1111101800000000     | HU42117730161111101800000000     | HU42 1177 3016 1111 1018 0000 0000
			IE      |  AIBK 931152 12345678           | IE29AIBK93115212345678           | IE29 AIBK 9311 5212 3456 78
			IL      |  010 800 0000099999999          | IL620108000000099999999          | IL62 0108 0000 0009 9999 999
			IR      |  1234123412341234123412         | IR081234123412341234123412       | IR08 1234 1234 1234 1234 1234 12
			IS      |  0159 26 007654 5510730339      | IS140159260076545510730339       | IS14 0159 2600 7654 5510 7303 39
			IT      |  X 05428 11101 000000123456     | IT60X0542811101000000123456      | IT60 X054 2811 1010 0000 0123 456
			JO      |  CBJO 0010 000000000131000302   | JO94CBJO0010000000000131000302   | JO94 CBJO 0010 0000 0000 0131 0003 02
			KW      |  CBKU 0000000000001234560101    | KW81CBKU0000000000001234560101   | KW81 CBKU 0000 0000 0000 1234 5601 01
			KZ      |  125 KZT5004100100              | KZ86125KZT5004100100             | KZ86 125K ZT50 0410 0100
			LB      |  0999 00000001001901229114      | LB62099900000001001901229114     | LB62 0999 0000 0001 0019 0122 9114
			LC      |  HEMM 000100010012001200023015  | LC55HEMM000100010012001200023015 | LC55 HEMM 0001 0001 0012 0012 0002 3015
			LI      |  08810 0002324013AA             | LI21088100002324013AA            | LI21 0881 0000 2324 013A A
			LT      |  10000 11101001000              | LT121000011101001000             | LT12 1000 0111 0100 1000
			LU      |  001 9400644750000              | LU280019400644750000             | LU28 0019 4006 4475 0000
			LV      |  BANK 0000435195001             | LV80BANK0000435195001            | LV80 BANK 0000 4351 9500 1
			MC      |  11222 00001 01234567890 30     | MC5811222000010123456789030      | MC58 1122 2000 0101 2345 6789 030
			MD      |  AG 000225100013104168          | MD24AG000225100013104168         | MD24 AG00 0225 1000 1310 4168
			ME      |  505 000012345678951            | ME25505000012345678951           | ME25 5050 0001 2345 6789 51
			MF      |  20041 01005 0500013M026 06     | MF8420041010050500013M02606      | MF84 2004 1010 0505 0001 3M02 606
			MG      |  12341234123412341234123        | MG4012341234123412341234123      | MG40 1234 1234 1234 1234 1234 123
			MK      |  250 120000058984               | MK07250120000058984              | MK07 2501 2000 0058 984
			ML      |  A 12312341234123412341234      | ML75A12312341234123412341234     | ML75 A123 1234 1234 1234 1234 1234
			MQ      |  20041 01005 0500013M026 06     | MQ5120041010050500013M02606      | MQ51 2004 1010 0505 0001 3M02 606
			MR      |  00020 00101 00001234567 53     | MR1300020001010000123456753      | MR13 0002 0001 0100 0012 3456 753
			MT      |  MALT 01100 0012345MTLCAST001S  | MT84MALT011000012345MTLCAST001S  | MT84 MALT 0110 0001 2345 MTLC AST0 01S
			MU      |  BOMM 0101101030300200000MUR    | MU17BOMM0101101030300200000MUR   | MU17 BOMM 0101 1010 3030 0200 000M UR
			MZ      |  123412341234123412341          | MZ97123412341234123412341        | MZ97 1234 1234 1234 1234 1234 1
			NC      |  20041 01005 0500013M026 06     | NC8420041010050500013M02606      | NC84 2004 1010 0505 0001 3M02 606
			NL      |  ABNA 0417164300                | NL91ABNA0417164300               | NL91 ABNA 0417 1643 00
			NO      |  8601 1117947                   | NO9386011117947                  | NO93 8601 1117 947
			PF      |  20041 01005 0500013M026 06     | PF5720041010050500013M02606      | PF57 2004 1010 0505 0001 3M02 606
			PK      |  SCBL 0000001123456702          | PK36SCBL0000001123456702         | PK36 SCBL 0000 0011 2345 6702
			PL      |  10901014 0000071219812874      | PL61109010140000071219812874     | PL61 1090 1014 0000 0712 1981 2874
			PM      |  20041 01005 0500013M026 06     | PM3620041010050500013M02606      | PM36 2004 1010 0505 0001 3M02 606
			PS      |  PALS 000000000400123456702     | PS92PALS000000000400123456702    | PS92 PALS 0000 0000 0400 1234 5670 2
			PT      |  0002 0123 12345678901 54       | PT50000201231234567890154        | PT50 0002 0123 1234 5678 9015 4
			QA      |  DOHB 00001234567890ABCDEFG     | QA58DOHB00001234567890ABCDEFG    | QA58 DOHB 0000 1234 5678 90AB CDEF G
			RE      |  20041 01005 0500013M026 06     | RE4220041010050500013M02606      | RE42 2004 1010 0505 0001 3M02 606
			RO      |  AAAA 1B31007593840000          | RO49AAAA1B31007593840000         | RO49 AAAA 1B31 0075 9384 0000
			RS      |  260 005601001611379            | RS35260005601001611379           | RS35 2600 0560 1001 6113 79
			SA      |  80 000000608010167519          | SA0380000000608010167519         | SA03 8000 0000 6080 1016 7519
			SC      |  SSCB 1101 0000000000001497 USD | SC18SSCB11010000000000001497USD  | SC18 SSCB 1101 0000 0000 0000 1497 USD
			SE      |  500 00000058398257466          | SE4550000000058398257466         | SE45 5000 0000 0583 9825 7466
			SI      |  19 100 0000123438              | SI56191000000123438              | SI56 1910 0000 0123 438
			SK      |  1200 000019 8742637541         | SK3112000000198742637541         | SK31 1200 0000 1987 4263 7541
			SM      |  U 03225 09800 000000270100     | SM86U0322509800000000270100      | SM86 U032 2509 8000 0000 0270 100
			SN      |  A 12312341234123412341234      | SN15A12312341234123412341234     | SN15 A123 1234 1234 1234 1234 1234
			ST      |  0001 0001 0051845310112        | ST68000100010051845310112        | ST68 0001 0001 0051 8453 1011 2
			TF      |  20041 01005 0500013M026 06     | TF2120041010050500013M02606      | TF21 2004 1010 0505 0001 3M02 606
			TL      |  008 0012345678910157           | TL380080012345678910157          | TL38 0080 0123 4567 8910 157
			TN      |  10 006 035183598478831         | TN5910006035183598478831         | TN59 1000 6035 1835 9847 8831
			TR      |  00061 0 0519786457841326       | TR330006100519786457841326       | TR33 0006 1005 1978 6457 8413 26
			UA      |  399622 0000026007233566001     | UA213996220000026007233566001    | UA21 3996 2200 0002 6007 2335 6600 1
			VG      |  VPVG 0000012345678901          | VG96VPVG0000012345678901         | VG96 VPVG 0000 0123 4567 8901
			WF      |  20041 01005 0500013M026 06     | WF9120041010050500013M02606      | WF91 2004 1010 0505 0001 3M02 606
			XK      |  1212 012345678906              | XK051212012345678906             | XK05 1212 0123 4567 8906
			YT      |  20041 01005 0500013M026 06     | YT3120041010050500013M02606      | YT31 2004 1010 0505 0001 3M02 606
		`(
			'generates "$full" and formatted "$formatted" from country $country and account $account',
			({ country, account, full, formatted }, next) => {
				expect(ISO13616.generate(account, country)).to.equal(full);
				expect(ISO13616.generate(account, country, false)).to.equal(
					full
				);
				expect(ISO13616.generate(account, country, true)).to.equal(
					formatted
				);

				next();
			}
		);
	});

	describe('matches', () => {
		const und = undefined;

		each`
			input                                      | country | checksum | account
			-------------------------------------------|---------|----------|---------
			QQ 00 ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 | ${und}  | ${und}   | ${und}
			BY 13 NBRB 3600 900000002Z00AB00           | BY      | 13       | NBRB3600900000002Z00AB00
			SV 62 CENR 00000000000000700025            | SV      | 62       | CENR00000000000000700025
			IQ 98 NBIQ 850 123456789012                | IQ      | 98       | NBIQ850123456789012
			AD 12 0001 2030 200359100100               | AD      | 12       | 00012030200359100100
			AE 07 033 1234567890123456                 | AE      | 07       | 0331234567890123456
			AL 47 21211009 0000000235698741            | AL      | 47       | 212110090000000235698741
			AO 44 123412341234123412341                | AO      | 44       | 123412341234123412341
			AT 61 19043 00234573201                    | AT      | 61       | 1904300234573201
			AX 21 123456 00000785                      | AX      | 21       | 12345600000785
			AZ 21 NABZ 00000000137010001944            | AZ      | 21       | NABZ00000000137010001944
			BA 39 129 007 9401028494                   | BA      | 39       | 1290079401028494
			BE 68 539 0075470 34                       | BE      | 68       | 539007547034
			BF 45 12341234123412341234123              | BF      | 45       | 12341234123412341234123
			BG 80 BNBG 9661 1020345678                 | BG      | 80       | BNBG96611020345678
			BH 67 BMAG 00001299123456                  | BH      | 67       | BMAG00001299123456
			BI 33 123412341234                         | BI      | 33       | 123412341234
			BJ 83 A 12312341234123412341234            | BJ      | 83       | A12312341234123412341234
			BL 68 20041 01005 0500013M026 06           | BL      | 68       | 20041010050500013M02606
			BR 97 00360305 00001 0009795493 P 1        | BR      | 97       | 00360305000010009795493P1
			CH 93 00762 011623852957                   | CH      | 93       | 00762011623852957
			CI 77 A 12312341234123412341234            | CI      | 77       | A12312341234123412341234
			CM 15 12341234123412341234123              | CM      | 15       | 12341234123412341234123
			CR 05 0 152 02001026284066                 | CR      | 05       | 015202001026284066
			CV 05 123412341234123412341                | CV      | 05       | 123412341234123412341
			CY 17 002 00128 0000001200527600           | CY      | 17       | 002001280000001200527600
			CZ 65 0800 000019 2000145399               | CZ      | 65       | 08000000192000145399
			DE 89 37040044 0532013000                  | DE      | 89       | 370400440532013000
			DK 50 0040 0440116243                      | DK      | 50       | 00400440116243
			DO 28 BAGR 00000001212453611324            | DO      | 28       | BAGR00000001212453611324
			DZ 35 12341234123412341234                 | DZ      | 35       | 12341234123412341234
			EE 38 22 00 221020145685                   | EE      | 38       | 2200221020145685
			ES 91 2100 0418 45 0200051332              | ES      | 91       | 21000418450200051332
			FI 21 123456 00000785                      | FI      | 21       | 12345600000785
			FO 20 0040 0440116243                      | FO      | 20       | 00400440116243
			FR 14 20041 01005 0500013M026 06           | FR      | 14       | 20041010050500013M02606
			GB 29 NWBK 601613 31926819                 | GB      | 29       | NWBK60161331926819
			GE 29 NB 0000000101904917                  | GE      | 29       | NB0000000101904917
			GF 41 20041 01005 0500013M026 06           | GF      | 41       | 20041010050500013M02606
			GI 75 NWBK 000000007099453                 | GI      | 75       | NWBK000000007099453
			GL 20 0040 0440116243                      | GL      | 20       | 00400440116243
			GP 11 20041 01005 0500013M026 06           | GP      | 11       | 20041010050500013M02606
			GR 16 011 0125 0000000012300695            | GR      | 16       | 01101250000000012300695
			GT 82 TRAJ 01 02 0000001210029690          | GT      | 82       | TRAJ01020000001210029690
			HR 12 1001005 1863000160                   | HR      | 12       | 10010051863000160
			HU 42 117 73016 1111101800000000           | HU      | 42       | 117730161111101800000000
			IE 29 AIBK 931152 12345678                 | IE      | 29       | AIBK93115212345678
			IL 62 010 800 0000099999999                | IL      | 62       | 0108000000099999999
			IR 08 1234123412341234123412               | IR      | 08       | 1234123412341234123412
			IS 14 0159 26 007654 5510730339            | IS      | 14       | 0159260076545510730339
			IT 60 X 05428 11101 000000123456           | IT      | 60       | X0542811101000000123456
			JO 94 CBJO 0010 000000000131000302         | JO      | 94       | CBJO0010000000000131000302
			KW 81 CBKU 0000000000001234560101          | KW      | 81       | CBKU0000000000001234560101
			KZ 86 125 KZT5004100100                    | KZ      | 86       | 125KZT5004100100
			LB 62 0999 00000001001901229114            | LB      | 62       | 099900000001001901229114
			LC 55 HEMM 000100010012001200023015        | LC      | 55       | HEMM000100010012001200023015
			LI 21 08810 0002324013AA                   | LI      | 21       | 088100002324013AA
			LT 12 10000 11101001000                    | LT      | 12       | 1000011101001000
			LU 28 001 9400644750000                    | LU      | 28       | 0019400644750000
			LV 80 BANK 0000435195001                   | LV      | 80       | BANK0000435195001
			MC 58 11222 00001 01234567890 30           | MC      | 58       | 11222000010123456789030
			MD 24 AG 000225100013104168                | MD      | 24       | AG000225100013104168
			ME 25 505 000012345678951                  | ME      | 25       | 505000012345678951
			MF 84 20041 01005 0500013M026 06           | MF      | 84       | 20041010050500013M02606
			MG 40 12341234123412341234123              | MG      | 40       | 12341234123412341234123
			MK 07 250 120000058984                     | MK      | 07       | 250120000058984
			ML 75 A 12312341234123412341234            | ML      | 75       | A12312341234123412341234
			MQ 51 20041 01005 0500013M026 06           | MQ      | 51       | 20041010050500013M02606
			MR 13 00020 00101 00001234567 53           | MR      | 13       | 00020001010000123456753
			MT 84 MALT 01100 0012345MTLCAST001S        | MT      | 84       | MALT011000012345MTLCAST001S
			MU 17 BOMM 0101101030300200000MUR          | MU      | 17       | BOMM0101101030300200000MUR
			MZ 97 123412341234123412341                | MZ      | 97       | 123412341234123412341
			NC 84 20041 01005 0500013M026 06           | NC      | 84       | 20041010050500013M02606
			NL 91 ABNA 0417164300                      | NL      | 91       | ABNA0417164300
			NO 93 8601 1117947                         | NO      | 93       | 86011117947
			PF 57 20041 01005 0500013M026 06           | PF      | 57       | 20041010050500013M02606
			PK 36 SCBL 0000001123456702                | PK      | 36       | SCBL0000001123456702
			PL 61 10901014 0000071219812874            | PL      | 61       | 109010140000071219812874
			PM 36 20041 01005 0500013M026 06           | PM      | 36       | 20041010050500013M02606
			PS 92 PALS 000000000400123456702           | PS      | 92       | PALS000000000400123456702
			PT 50 0002 0123 12345678901 54             | PT      | 50       | 000201231234567890154
			QA 58 DOHB 00001234567890ABCDEFG           | QA      | 58       | DOHB00001234567890ABCDEFG
			RE 42 20041 01005 0500013M026 06           | RE      | 42       | 20041010050500013M02606
			RO 49 AAAA 1B31007593840000                | RO      | 49       | AAAA1B31007593840000
			RS 35 260 005601001611379                  | RS      | 35       | 260005601001611379
			SA 03 80 000000608010167519                | SA      | 03       | 80000000608010167519
			SC 18 SSCB 1101 0000000000001497 USD       | SC      | 18       | SSCB11010000000000001497USD
			SE 45 500 00000058398257466                | SE      | 45       | 50000000058398257466
			SI 56 19 100 0000123438                    | SI      | 56       | 191000000123438
			SK 31 1200 000019 8742637541               | SK      | 31       | 12000000198742637541
			SM 86 U 03225 09800 000000270100           | SM      | 86       | U0322509800000000270100
			SN 15 A 12312341234123412341234            | SN      | 15       | A12312341234123412341234
			ST 68 0001 0001 0051845310112              | ST      | 68       | 000100010051845310112
			TF 21 20041 01005 0500013M026 06           | TF      | 21       | 20041010050500013M02606
			TL 38 008 0012345678910157                 | TL      | 38       | 0080012345678910157
			TN 59 10 006 035183598478831               | TN      | 59       | 10006035183598478831
			TR 33 00061 0 0519786457841326             | TR      | 33       | 0006100519786457841326
			UA 21 399622 0000026007233566001           | UA      | 21       | 3996220000026007233566001
			VG 96 VPVG 0000012345678901                | VG      | 96       | VPVG0000012345678901
			WF 91 20041 01005 0500013M026 06           | WF      | 91       | 20041010050500013M02606
			XK 05 1212 012345678906                    | XK      | 05       | 1212012345678906
			YT 31 20041 01005 0500013M026 06           | YT      | 31       | 20041010050500013M02606
		`(
			'Symbol.match $input into country $country, account $account and checksum $checksum',
			({ input, country, checksum, account }, next) => {
				const match = input.match(ISO13616);

				expect(match).to.be.object();
				expect(match).to.contain('country');
				expect(match.country).to.equal(country);
				expect(match).to.contain('checksum');
				expect(match.checksum).to.equal(checksum);
				expect(match).to.contain('account');
				expect(match.account).to.equal(account);

				next();
			}
		);
	});

	describe('formats', () => {
		each`
			input                                | output
			-------------------------------------|--------
			a                                    | A
			a12                                  | A12
			ab                                   | AB
			ab12                                 | AB12
			a b                                  | AB
			a b12                                | AB12
			abc                                  | ABC
			abc12                                | ABC1 2
			a-bc                                 | ABC
			a-bc12                               | ABC1 2
			a-b-c                                | ABC
			a-b-c12                              | ABC1 2
			abcd                                 | ABCD
			abcd12                               | ABCD 12
			ab-cd                                | ABCD
			ab-cd12                              | ABCD 12
			ab.cd                                | ABCD
			ab.cd12                              | ABCD 12
			abcde                                | ABCD E
			abcde12                              | ABCD E12
			abcdef                               | ABCD EF
			abcdef12                             | ABCD EF12
			abcdefg                              | ABCD EFG
			abcdefg12                            | ABCD EFG1 2
			abcdefgh                             | ABCD EFGH
			abcdefgh12                           | ABCD EFGH 12
			abcdefghi                            | ABCD EFGH I
			abcdefghi12                          | ABCD EFGH I12
			abcdefghij                           | ABCD EFGH IJ
			abcdefghij12                         | ABCD EFGH IJ12
			abcdefghijk                          | ABCD EFGH IJK
			abcdefghijk12                        | ABCD EFGH IJK1 2
			abcdefghijkl                         | ABCD EFGH IJKL
			abcdefghijkl12                       | ABCD EFGH IJKL 12
			abcdefghijklm                        | ABCD EFGH IJKL M
			abcdefghijklm12                      | ABCD EFGH IJKL M12
			abcdefghijklmn                       | ABCD EFGH IJKL MN
			abcdefghijklmn12                     | ABCD EFGH IJKL MN12
			abcdefghijklmno                      | ABCD EFGH IJKL MNO
			abcdefghijklmno12                    | ABCD EFGH IJKL MNO1 2
			abcdefghijklmnop                     | ABCD EFGH IJKL MNOP
			abcdefghijklmnop12                   | ABCD EFGH IJKL MNOP 12
			abcdefghijklmnopq                    | ABCD EFGH IJKL MNOP Q
			abcdefghijklmnopq12                  | ABCD EFGH IJKL MNOP Q12
			abcdefghijklmnopqr                   | ABCD EFGH IJKL MNOP QR
			abcdefghijklmnopqr12                 | ABCD EFGH IJKL MNOP QR12
			abcdefghijklmnopqrs                  | ABCD EFGH IJKL MNOP QRS
			abcdefghijklmnopqrs12                | ABCD EFGH IJKL MNOP QRS1 2
			abcdefghijklmnopqrst                 | ABCD EFGH IJKL MNOP QRST
			abcdefghijklmnopqrst12               | ABCD EFGH IJKL MNOP QRST 12
			abcdefghijklmnopqrstu                | ABCD EFGH IJKL MNOP QRST U
			abcdefghijklmnopqrstu12              | ABCD EFGH IJKL MNOP QRST U12
			abcdefghijklmnopqrstuv               | ABCD EFGH IJKL MNOP QRST UV
			abcdefghijklmnopqrstuv12             | ABCD EFGH IJKL MNOP QRST UV12
			abcdefghijklmnopqrstuvw              | ABCD EFGH IJKL MNOP QRST UVW
			abcdefghijklmnopqrstuvw12            | ABCD EFGH IJKL MNOP QRST UVW1 2
			abcdefghijklmnopqrstuvwx             | ABCD EFGH IJKL MNOP QRST UVWX
			abcdefghijklmnopqrstuvwx12           | ABCD EFGH IJKL MNOP QRST UVWX 12
			abcdefghijklmnopqrstuvwxy            | ABCD EFGH IJKL MNOP QRST UVWX Y
			abcdefghijklmnopqrstuvwxy12          | ABCD EFGH IJKL MNOP QRST UVWX Y12
			abcdefghijklmnopqrstuvwxyz           | ABCD EFGH IJKL MNOP QRST UVWX YZ
			abcdefghijklmnopqrstuvwxyz12         | ABCD EFGH IJKL MNOP QRST UVWX YZ12
			abc.def.ghi.jkl.mno.pqr.stu.vwx.yz   | ABCD EFGH IJKL MNOP QRST UVWX YZ
			abc.def.ghi.jkl.mno.pqr.stu.vwx.yz12 | ABCD EFGH IJKL MNOP QRST UVWX YZ12
		`('input "$input" is formatted as "$output"', ({ input, output }, next) => {
			expect(ISO13616.format(input)).to.equal(output);

			next();
		});
	});
});
